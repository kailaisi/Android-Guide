### 事件分发

![image-20200324185524436](http://cdn.qiniu.kailaisii.com/typora/20200324185529-500051.png)

```
    public boolean dispatchTouchEvent(MotionEvent ev) {
        if (ev.getAction() == MotionEvent.ACTION_DOWN) {
        	//空方法
            onUserInteraction();
        }
        //getWindow()方法返回的是PhoneWindow。
        if (getWindow().superDispatchTouchEvent(ev)) {
            return true;
        }
        return onTouchEvent(ev);
    }
```

这里如果**superDispatchTouchEvent**分发返回的是true的话，那么直接返回了。否则就会调用**onTouchEvnent**方法。

我们看一下**superDispatchTouchEvent**的实现方法

```
 	@Override
    public boolean superDispatchTouchEvent(MotionEvent event) {
        return mDecor.superDispatchTouchEvent(event);
    }
```

这里使用的是

```
public class DecorView extends FrameLayout implements RootViewSurfaceTaker, WindowCallbacks
...
```

所以这里就通过mDecor继承FrameLayout，也就是ViewGroup。即事件从activity传递到了viewgroup。

这个mDecor是getWindow.getDecorView()返回的View，而我们所设置的setContentView设置的View则是它的一个子View。换句话说，是属于我们页面的顶级View。这样就可以通过层层的分发来分发到我们写的布局中。

