## 小白音视频

#### 基础

##### 音视频应用

* 互动直播

* 娱乐主播
* 音视频特效
* 音视频编辑

##### 常用工具

* ffmpeg
* ffplay
* vlc：有图形页面，基于ffmpeg

##### 架构模型

* 流媒体服务器
* 推流工具
* 拉流工具

#### 音视频基础

##### 文件操作

C语言操作文件主要是通过句柄来处理文件信息

* 文件类型：FILE* file;
* 打开文件：FILE* fopen(path,mode)
* 关闭文件：fclose(FILE*)

##### 音频处理流程

###### 直播客户端的处理流程

1. 音视频采集
2. 音视频编码
3. 传输
4. 音视频解码
5. 音视频渲染

**格式流转**

> 采集编码：PCM->AAC/MP3->mp4/flv
>
> 解码播放：mp4/flv->AAC/MP3->PCM

* 模数转化

###### 音频数据流转

##### 音频原始数据格式

* PCM。没有任何的数据格式信息。纯音频数据
* WAV。有文件格式，在PCM原始数据的基础上，封装了头信息。可以存储PCM原始数据，也可以存储压缩数据。

##### 量化

量化的标准分为3个：

* 采样大小：一个采样用多少bit存放。常用的是16bit
* 采样率：8k,16k,32k,44.1k,48k。频率越高，和真实信息越真实。
* 声道数：单声道，双声道，多声道。

###### PCM

一个音频文件的**码率**=采样率✖️采样大小✖️声道数。

比如：44.1k，采样大小16bit，双声道的PCM编码的文件，他的码率=44.1k✖️16✖️2=1411.2kb/s。显然这种码率是比较高的。不适合在网络上传输。

###### WAV

在PCM的基础上增加了WAV Header（44个字节）。

![image-20221011180849841](http://cdn.qiniu.kailaisii.com/typora/image-20221011180849841.png)

ChunkSize：块大小

WAVE：文件格式

Subcheck1Size：绿色部分的大小

AudioFormat：数据格式

NumChannels：通道数

SampleRate：采样率

ByteRate：字节数

BlockAlign：块对齐方式

BitsPerSample：采样大小

##### 音频编码原理

###### 有损编码

###### 无损编码（熵编码）

* 哈弗曼编码
* 算术编码
* 香农编码

###### 音频编码过程

![image-20221017215500204](http://cdn.qiniu.kailaisii.com/typora/20221017215504-116480.png)



#### 视频基础知识