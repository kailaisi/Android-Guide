加密技术（进行中）

加密与解密以及各种算法，可能在实际中经常使用，但是如果说具体深入的去探究的话，可能又是一种模棱两可，感觉明白了，其实又说不清楚的一个概念。

但只要搞懂了底层原理，那么以后再使用的时候，就能够轻松的理解，并且能够和理论知识相互印证的功效。

### 密码学发展史

加密与解密的技术，其实来源于密码学，听起来又是一门高大上的学科。具体的咱也不探究，咱只看看它的发展史就好。

密码学大致可以分为**古典密码学**和**现代密码学**

#### 古典密码学

古典密码学起源于战争。在战争中，一旦信使被抓，那么可能己方机密的作战计划就可能别对方知道，所以为此**产生了对信件进行加密处理，防止对方通过截获信件知道己方的作战信息**的需求。

为此，密码学产生了，为的就是防止在战争中被对方发现并破译信使所传递的信息。主要产生的有两种加密方式：移位式加密和替换式加密

##### 移位式加密

把长条纸螺旋形地斜绕在一个多棱棒上，将文字沿棒的水平方向从左到右书写，写一个字旋转一下，写完一行再另起一行从左到右写，直到写完。解下来后，纸条上的文字消息杂乱无章、无法理解，这就是密文,但将它绕在另一个同等尺寸的棒子上后，就能看到原始的消息。这是最早的密码技术。

![image-20210320185345334](http://cdn.qiniu.kailaisii.com/typora/20210320185349-695166.png)

##### 替换式加密

替换式加密，是指使用某个文字替代另一个文字的方式。只要双方知道对应的替换方案，那么就可以还原出原来的信息。

例如： 凯撒（Caesar）密码

>原理：把一个字母替换为它后面固定位置的另一个字母（单表代换密码）。
>
>A B C D E F G …… X Y Z
>
>D E F G H I J …… A B C
>
>明文:Caesar cipher is a shift substitution
>
>密文:FDHVDU FLSKHU LV D VKLIW VXEVWLWXWLRQ







* 起源：古代战争-古典密码学
* 移位式加密：密码棒
* 替换式加密
* 现代密码学：可用于各种二进制数据
  * 对称加密：AES，DES
  * 非对称加密：RSA（可以可以加密，可以签名），DSA（丧失加密功能，但是签名验证速度非常快，所以专门用来做签名）
    * 优点：可以在公网上传输公钥信息，缺点：计算太复杂。
    * 公钥加密的，私钥可以解密。
    * **私钥加密的，私钥可以解密**：A利用公钥，变成B，**B利用私钥变成A，A利用公钥变成B**，由此得出结论。但是通过私钥可以推算公钥，所以不能公布私钥，只能公布公钥
    * 延伸用途：数字签名



#### 非对称加密通讯流程：

![image-20210319211956348](http://cdn.qiniu.kailaisii.com/typora/20210319211959-776227.png)

特点：A和B互相持有对方公钥，这样C就无法偷窥返回的具体数据。

缺点：C可以伪造数据：C拦截A的数据，然后将想发送的数据，通过B的公钥加密，发给B。这时候**B无法判断消息是否是A发送的**。



#### 数字签名：

![image-20210319211005020](http://cdn.qiniu.kailaisii.com/typora/20210319211009-362580.png)

源数据通过私钥签名，得到签名数据。用公钥可以得到我的原始数据。

但是：无法**通过原始数据，伪造对应的签名文件，因为没有私钥，**



**深入思考**：如果我有签名数据，然后通过公钥之后解密，如何判断得到的原始数据是否正确？

​			回：在签名数据和原数据一起发送，用户解密后，解密后的文件和给的原数据比较，判断是否解密成功。

![image-20210319211659139](http://cdn.qiniu.kailaisii.com/typora/20210319211659-981704.png)



#### 结合

加密作用是防止偷窥，数字签名是防止伪造。

![image-20210319212638772](http://cdn.qiniu.kailaisii.com/typora/20210319212639-560204.png)

对于要传输的原始数据，通过非对称加密进行加密。并且附带上自己的数字签名。

这样：中间人，即无法看到数据，也无法伪装成A了。

**漏洞说明：**

1.虽然看不到密文，但是可以通过公钥，对签名文件的加密，得到原数据，也就知道了密文解密之后的数据了。

2.签名数据如果是对原数据进行加密，一般数据量会比较大，也就是传输数据量会比较大。可以对原数据进行一次压缩（hash算法），然后对hash进行签名。

**签名与验证完整版**

实际的数字签名，会将源数据进行一次hash，然后就无法通过将签名文件进行解密得到实际的原数据了；同时也减少了实际传输的数据量

![image-20210320121559018](http://cdn.qiniu.kailaisii.com/typora/20210320121606-207390.png)

#### Base64

将二进制数据（可以是图片，文本，gif，视频等等）转换为由64个字符组成的字符串的编码算法。

![img](https://images0.cnblogs.com/blog/238451/201408/291153483606946.png)



用途：

* 让源数据具有字符串特性，可以进行传输，可以保存到文本文件，可以进行软件的传输等等
* 更安全和高效？ 
  * 安全？ 错误，根本不是加密，所以没有安全性可言
  * 高效？原来8个字节表示的长度，现在用6个字节显示一个字符，体积增加了三分之一！！！

#### URL encoding

将URL中的保留字符使用百分号“%”进行编码

作用：消除歧异，避免解析错误

​		eg:  www.baidu.com?name=我&是   =>www.baidu.com?name=我%26是

#### 压缩和解压缩	

##### 无损压缩

无损压缩：GIF、PNG、PDF、ZIP。WAV、FLAC

* 游程编码
* 字典编码

##### 有损压缩

MP3、JPEG、MPEG-4

* 感知编码：去除掉人无法感知的数据

#### Hash

定义：把任意数据转化为指定大小范围的数据，数据是有损失的，是不可逆的。

作用：摘要，数字指纹

经典算法：MD5，SHA1，SHA256等

算法要求：

* 能够尽量减少哈希碰撞（联想：HashMap，ThreadLocal中的HashCode算法）
* 防破解

实际用途：

* 数据完整性验证：下载的文件，都有hash值，判断文件是否相同
* 快速查找：hashCode()和HashMap
* 隐私保护：后端数据库密码不用明文保护，而是用hash保存，能够方式被盗之后的撞库（**所以现在所有的网站都没有密码找回，而是只有密码重置，因为对方也不知道你的密码是什么了，只能进行重置**）

引申=>

哈希破解：彩虹表，保存常用数据的某种算法下的加密后的hash。

对付彩虹表：加盐



https://www.cnblogs.com/luguo3000/p/3940197.html

https://zh.wikipedia.org/wiki/Base64

https://juejin.cn/post/6844904100035821575#heading-76

https://zhuanlan.zhihu.com/p/158514594?utm_source=wechat_timeline