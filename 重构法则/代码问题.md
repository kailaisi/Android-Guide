### 代码问题

#### 痴迷于原始数据

**特征**

* 对于一些简单的任务，使用原始数据而不是简单的对象(比如货币、范围、手机号字符串等等)
* 使用常量来表示信息(例如用静态 `USER_ADMIN_ROLE = 1` 来表示用户的管理员权限)
* 使用字符串常量作为字段名

![img](https://sourcemaking.com/images/refactoring-illustrations/2x/primitive-obsession-1.png)

**问题原因**





#### 长参数

**特征**

一个方法有三个或者四个以上的参数。

![img](https://sourcemaking.com/images/refactoring-illustrations/2x/long-parameter-list-1.png)

**问题原因**

一个方法中如何融合了几种类型的算法的话，可能就会出现一长串的参数列表。一长串的参数主要用来控制执行那种算法。

长参数列表也许是使类更加独立的副产品。例如。某个方法中用于创建特殊对象的代码，从当前的方法中移到了调用该方法的内部。这样的话，创建的对象就需要作为一个参数传递给该方法。这样的话，原始类就不需要关心对象之间的关系，依赖关系减少了。如果创建多个对象的话，那么就会形成一种长参数。

长参数是特别难以理解的，随着时间的增长，这些参数就变得难以使用。方法可以使用自己的对象数据，而不是一长串的参数。如果当前对象没有包含必须的数据，那么可以创建一个对象(它将获取必须的数据)作为方法的参数传递

**方法**

* 仔细检测参数，如果参数只是另一个对象的方法的调用结果。请使用**用方法调用代替参数法**。这个对象可以作为自己的类的字段，也可以作为方法参数传递。![img](https://sourcemaking.com/images/refactoring-illustrations/2x/long-parameter-list-2.png)
* 与其将从另一个对象接收的一组数据作为参数传递，不如通过**保存整个对象法**将对象本身传递给方法。
* 如果有几个无关的参数，可以通过**引入参数对象法**来处理。

**效果**

* 更易读、更简短
* 重构可以暴漏出未注意到的重复代码。

**什么时候忽视这种优化**

如果这样做会导致类之间不必要的依赖关系，请不要移除参数。

#### 数据群

**特征**

不同的代码块中包含了相同的变量组信息(例如数据库连接的参数)。这些组信息应该拥有自己单独的类。

![img](https://sourcemaking.com/images/refactoring-illustrations/data-clumps-1.png)

**原因**

这种通常是由于程序结构差或者"CV大法"造成的.

如果你想要确定代码块是否是数据块，只需要删除其中一个数据值，然后查看其他的值是否仍然有意义。如果不是的话，证明这属于一个数据块，表明这组变量应该组成一个对象。

**方案**